from logging.handlers import TimedRotatingFileHandler
import nmap
import logging
import coloredlogs

# coloredlogs.install()

# create logger
logHandler = TimedRotatingFileHandler('logs/scanner.log', when="m", interval=1, backupCount=7)
logFormatter = logging.Formatter('%(asctime)s %(name)s[%(process)d] %(levelname)s %(message)s')
logHandler.setFormatter(logFormatter)

logger = logging.getLogger()
logger.addHandler(logHandler)
logger.setLevel(logging.DEBUG)

while True:
    logger.info('Starting scanner for ip: {}...'.format('127.0.0.1'))
    nm = nmap.PortScanner()
    nm.scan('127.0.0.1')
    nm.command_line()
    logger.info(nm['127.0.0.1'])
    logger.info('Scanning done')
